
<h2 class="text-center mb-4">🎁 Intercambio</h2>

<button class="btn btn-info btn-md shadow-sm btn-cambio">Agregar participante</button>

<div class="table-responsive">
    <hr />
    <table id="participantes" class="table table-hover align-middle table-bordered shadow-sm rounded-4 overflow-hidden">
        <thead class="table-primary text-center">
            <tr>
                <th>Nombre</th>
                <th>Grupo</th>
                <th>Deseo de Regalo</th>
                <th>Email</th>
                <th>Acción</th>
            </tr>
        </thead>
        <tbody class="table-light text-center"></tbody>
    </table>
</div>

<div class="modal fade" id="detallesModal" tabindex="-1" aria-labelledby="detallesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content shadow-lg border-0 rounded-4">
            <div class="modal-header bg-gradient text-white rounded-top-4">
                <h4 class="modal-title fw-bold" id="detallesModalLabel">Agregar Participante</h4>
            </div>
            <div class="modal-body">
                <form id="formParticipante" class="needs-validation" novalidate>
                    <div class="mb-3">
                        <label for="nombre" class="form-label fw-semibold">Nombre</label>
                        <input type="text" class="form-control form-control-lg" id="nombre" placeholder="Ingresa el nombre" required>
                    </div>
                    <div class="mb-3">
                        <label for="grupo" class="form-label fw-semibold">Grupo</label>
                        <input type="text" class="form-control form-control-lg" id="grupo" placeholder="Ejemplo: A, B, C" required>
                    </div>
                    <div class="mb-3">
                        <label for="regalo" class="form-label fw-semibold">Regalo</label>
                        <textarea class="form-control form-control-lg" id="regalo" rows="3" placeholder="Escribe qué regalo te gustaría recibir" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label fw-semibold">Correo electrónico</label>
                        <input type="email" class="form-control form-control-lg" id="email" placeholder="nombre@correo.com" required>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" onclick="agregarParticipante()" form="formParticipante" class="btn btn-success px-4 fw-bold">Guardar</button>
            </div>
        </div>
    </div>
</div>


@section scripts{
    <script>
        $('.btn-cambio').click(function () {
            $('#detallesModal').modal('show');
        });


        function agregarParticipante() {
            // Obtener valores
            const nombre = document.getElementById("nombre").value;
            const grupo = document.getElementById("grupo").value;
            const regalo = document.getElementById("regalo").value;
            const email = document.getElementById("email").value;

            // Obtener la tabla y el cuerpo de la tabla
            const tabla = document.getElementById("participantes").getElementsByTagName('tbody')[0];
            const nuevaFila = tabla.insertRow();

            // Crear la celda
            const celdaNombre = nuevaFila.insertCell(0);
            const celdaGrupo = nuevaFila.insertCell(1);
            const celdaRegalo = nuevaFila.insertCell(2);
            const celdaEmail = nuevaFila.insertCell(3);
            const celdaEliminar = nuevaFila.insertCell(4);

            //Insertar valores
            celdaNombre.textContent = nombre;
            celdaGrupo.textContent = grupo;
            celdaRegalo.textContent = regalo;
            celdaEmail.textContent = email;
            celdaEliminar.innerHTML = "";

            celdaEliminar.innerHTML = `<button class="btn btn-danger btn-sm">Eliminar</button>`;

            celdaEliminar.addEventListener("click", function () {
                this.closest("tr").remove();
            });

            $('#detallesModal').modal('hide');
            $('#formParticipante')[0].reset();
        }
    </script>
} 